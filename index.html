<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Production Line Performance Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* All your existing CSS styles remain exactly the same */
    /* ... [All previous CSS content remains unchanged] ... */
  </style>
</head>

<body>
  <div class="loader-container">
    <div class="loader"></div>
  </div>
  
  <div class="page-content">
    <!-- Background elements -->
    <div class="wave-background"></div>
    <div class="wave-effect"></div>
    
    <!-- Language Switcher -->
    <div class="language-switcher">
      <button onclick="changeLanguage('en')">EN</button>
      <button onclick="changeLanguage('ro')">RO</button>
    </div>
    
    <!-- Navigation Bar -->
    <div class="navbar">
      <button onclick="showTab('performance')" class="active">Performance Tracker</button>
      <button onclick="showTab('calculator')">Order Remainder Calculator</button>
    </div>
    
    <!-- Performance Tracker Tab -->
    <div id="performance" class="tab-content active">
      <!-- ... [All performance tracker HTML remains unchanged] ... -->
    </div>
    
    <!-- Order Remainder Calculator Tab -->
    <div id="calculator" class="tab-content">
      <!-- ... [All calculator HTML remains unchanged] ... -->
    </div>
  </div>

  <script>
    // Translation dictionary
    const translations = {
      en: {
        performanceTracker: "Performance Tracker",
        orderCalculator: "Order Remainder Calculator",
        currentShift: "Current Shift:",
        targetPerDay: "Target Per Day:",
        currentOutput: "Current Output:",
        checkLine: "Check Line",
        checkAll: "Check All",
        production: "Production:",
        performance: "Performance:",
        expectedProduction: "Expected Production:",
        totalFromDB: "Total From Database:",
        completePallets: "Complete Pallets:",
        calculate: "Calculate",
        fillRandom: "Fill Random Values",
        standardView: "Standard View",
        productionView: "Production Flow View",
        morningShift: "Morning Shift",
        afternoonShift: "Afternoon Shift",
        nightShift: "Night Shift",
        chslongLine: "Chslong Line",
        backrestLine: "Backrest Line",
        seatLine: "Seat Line",
        packet1: "Packet 1",
        packet2: "Packet 2",
        packet3: "Packet 3"
      },
      ro: {
        performanceTracker: "Monitorizare Performanță",
        orderCalculator: "Calculator Comenzi Rămase",
        currentShift: "Schimb Curent:",
        targetPerDay: "Țintă Pe Zi:",
        currentOutput: "Producție Curentă:",
        checkLine: "Verifică Linia",
        checkAll: "Verifică Toate",
        production: "Producție:",
        performance: "Performanță:",
        expectedProduction: "Producție Așteptată:",
        totalFromDB: "Total Din Baza De Date:",
        completePallets: "Paleti Compleți:",
        calculate: "Calculează",
        fillRandom: "Completează Aleatoriu",
        standardView: "Vizualizare Standard",
        productionView: "Vizualizare Flux Producție",
        morningShift: "Schimbul Dimineții",
        afternoonShift: "Schimbul După-Amiezii",
        nightShift: "Schimbul Nopții",
        chslongLine: "Linia Chslong",
        backrestLine: "Linia Spătar",
        seatLine: "Linia Șezut",
        packet1: "Pachetul 1",
        packet2: "Pachetul 2",
        packet3: "Pachetul 3"
      }
    };

    let currentLanguage = 'en';

    function changeLanguage(lang) {
      currentLanguage = lang;
      updateTexts();
      // Update active button state
      document.querySelectorAll('.language-switcher button').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.toUpperCase() === lang.toUpperCase());
      });
    }

    function updateTexts() {
      const t = translations[currentLanguage];
      
      // Navbar buttons
      const navButtons = document.querySelectorAll('.navbar button');
      if (navButtons.length >= 2) {
        navButtons[0].textContent = t.performanceTracker;
        navButtons[1].textContent = t.orderCalculator;
      }
      
      // Performance tracker
      const shiftInfo = document.querySelector('#shift-info p');
      if (shiftInfo) {
        shiftInfo.innerHTML = `${t.currentShift} <span id="current-shift">Calculating...</span>`;
      }
      
      const cardTitles = document.querySelectorAll('.card h2');
      if (cardTitles.length >= 3) {
        cardTitles[0].textContent = t.chslongLine;
        cardTitles[1].textContent = t.backrestLine;
        cardTitles[2].textContent = t.seatLine;
      }
      
      const inputLabels = document.querySelectorAll('.input-group label');
      if (inputLabels.length >= 4) {
        inputLabels[0].textContent = t.targetPerDay;
        inputLabels[1].textContent = t.currentOutput;
        inputLabels[2].textContent = t.totalFromDB;
        inputLabels[3].textContent = t.completePallets;
      }
      
      document.querySelectorAll('#check-line1, #check-line2, #check-line3').forEach(btn => {
        btn.textContent = `${t.checkLine} ${btn.id.slice(-1)}`;
      });
      
      const checkAllBtn = document.getElementById('check-all');
      if (checkAllBtn) checkAllBtn.textContent = t.checkAll;
      
      // Calculator
      const packetTitles = document.querySelectorAll('h3');
      if (packetTitles.length >= 3) {
        packetTitles[0].textContent = t.packet1;
        packetTitles[1].textContent = t.packet2;
        packetTitles[2].textContent = t.packet3;
      }
      
      const calcButtons = document.querySelectorAll('.card button');
      if (calcButtons.length >= 2) {
        calcButtons[0].textContent = t.calculate;
        calcButtons[1].textContent = t.fillRandom;
      }
      
      const switchLabels = document.querySelectorAll('.switch-label');
      if (switchLabels.length >= 2) {
        switchLabels[0].textContent = t.standardView;
        switchLabels[1].textContent = t.productionView;
      }
      
      // Update shift names if they're displayed
      updateShiftProgress();
    }

    // Update shift names in the progress display
    const originalUpdateShiftProgress = updateShiftProgress;
    updateShiftProgress = function() {
      originalUpdateShiftProgress();
      const t = translations[currentLanguage];
      const shiftElement = document.getElementById('current-shift');
      if (!shiftElement) return;
      
      if (shiftElement.textContent.includes("Morning") || shiftElement.textContent.includes("Dimineții")) {
        shiftElement.textContent = t.morningShift;
      } else if (shiftElement.textContent.includes("Afternoon") || shiftElement.textContent.includes("După-Amiezii")) {
        shiftElement.textContent = t.afternoonShift;
      } else if (shiftElement.textContent.includes("Night") || shiftElement.textContent.includes("Nopții")) {
        shiftElement.textContent = t.nightShift;
      }
    };

    function getCurrentShift() {
      const now = new Date();
      const hours = now.getHours();
      const t = translations[currentLanguage];
      
      if(hours >= 6 && hours < 14) {
        return t.morningShift;
      } else if(hours >= 14 && hours < 22) {
        return t.afternoonShift;
      } else {
        return t.nightShift;
      }
    }

    function updateShiftProgress() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      const shiftDuration = 480; // 8 hours = 480 minutes
      let shiftStartTime = 0;
      let shiftName = "";
      
      if(hours >= 6 && hours < 14) {
        shiftStartTime = 6 * 60; // 6 AM
        shiftName = translations[currentLanguage].morningShift;
      } else if(hours >= 14 && hours < 22) {
        shiftStartTime = 14 * 60; // 2 PM
        shiftName = translations[currentLanguage].afternoonShift;
      } else {
        shiftStartTime = 22 * 60; // 10 PM
        shiftName = translations[currentLanguage].nightShift;
      }
      
      const currentTimeInMinutes = (hours * 60) + minutes;
      if(shiftStartTime > currentTimeInMinutes) {
        shiftStartTime -= 1440;
      }
      
      const timeElapsed = currentTimeInMinutes - shiftStartTime;
      let shiftProgress = (timeElapsed / shiftDuration) * 100;
      if(shiftProgress > 100) shiftProgress = 100;
      if(shiftProgress < 0) shiftProgress = 0;
      
      const shiftElement = document.getElementById('current-shift');
      const progressFill = document.getElementById('shift-progress-fill');
      
      if (shiftElement) shiftElement.textContent = shiftName;
      if (progressFill) {
        progressFill.style.width = `${shiftProgress}%`;
        progressFill.textContent = `${Math.round(shiftProgress)}%`;
      }
    }

    // ... [All other existing JavaScript functions remain unchanged] ...
    // (getExpectedProduction, checkLinePerformance, checkAllPerformance, etc.)

    function createFallingStars() {
      const container = document.createElement('div');
      container.className = 'stars-container';
      document.body.insertBefore(container, document.body.firstChild);
      
      for(let i = 0; i < 50; i++) {
        setTimeout(() => {
          const star = document.createElement('div');
          star.className = 'star';
          const size = Math.random() * 2 + 1;
          star.style.width = `${size}px`;
          star.style.height = `${size}px`;
          star.style.left = `${Math.random() * 100}%`;
          star.style.top = `${Math.random() * 100}%`;
          const duration = Math.random() * 5 + 3;
          star.style.animationDuration = `${duration}s`;
          star.style.animationDelay = `${Math.random() * 10}s`;
          container.appendChild(star);
        }, i * 200);
      }
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      createFallingStars();
      
      // Set default language
      changeLanguage('en');
      
      // Hide loader and show content after delay
      setTimeout(function() {
        const loader = document.querySelector('.loader-container');
        const content = document.querySelector('.page-content');
        if (loader) loader.style.display = 'none';
        if (content) content.style.display = 'block';
      }, 3000);
      
      // Initialize shift progress
      updateShiftProgress();
      setInterval(updateShiftProgress, 60000);
      
      // Enable line check buttons when targets are entered
      document.getElementById('target-line1')?.addEventListener('input', () => {
        document.getElementById('check-line1').disabled = false;
      });
      document.getElementById('target-line2')?.addEventListener('input', () => {
        document.getElementById('check-line2').disabled = false;
      });
      document.getElementById('target-line3')?.addEventListener('input', () => {
        document.getElementById('check-line3').disabled = false;
      });
    });
  </script>
</body>
</html>
